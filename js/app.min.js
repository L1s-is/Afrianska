(()=>{"use strict";function e(e,t){e.classList.add(t)}function t(e,t){e.classList.remove(t)}let n=document.querySelector(".error");function o(e){n.querySelector(".error__message").textContent=e,t(n,"hidden"),n.querySelector("button").addEventListener("click",s)}let i=document.querySelector(".success");function c(){i.classList.add("hidden"),t(k,"not-scroll")}function s(){n.classList.add("hidden")}const r={email:/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu,name:/^.[^<>()\]\\.,;:@$#%"]{3,60}$/};function l(n,o,i,c){!function(e,t){e.setCustomValidity(t)}(n,o),t(n,i),e(n,c)}function a(e){let t=e.target?e.target:e;t.value?function(e){let t=e.value.replace(/ +/g," ").trim();return"name"===e.name?r.name.test(t):r.email.test(t)}(t)?l(t,"","element-stroke--invalid","element-stroke--valid"):l(t,"incorrect field value","element-stroke--valid","element-stroke--invalid"):l(t,"The field cannot be empty","element-stroke--valid","element-stroke--invalid")}const d=document.querySelector(".form-box"),u=d.querySelector(".work__form"),m=u.querySelectorAll("input"),f=u.querySelector("button[type=submit]"),v=document.querySelector(".work__button"),k=document.querySelector("body"),y=document.querySelector(".nav__list"),L=u.querySelector(".btn--close");function g(){t(k,"not-scroll"),t(k,"not-scroll--desktop")}function h(){!function(n,r,l){[...r].forEach((e=>e.addEventListener("input",a))),l.addEventListener("click",(()=>{[...r].forEach((e=>a(e)))})),n.addEventListener("submit",(function(l){[...r].forEach((e=>{t(e,"element-stroke--valid"),t(e,"element-stroke--invalid")})),async function(n,r,l){try{(await fetch(n,{method:"POST",data:r})).ok?(l(),function(){t(i,"hidden");let n=document.querySelector(".button--success");e(k,"not-scroll"),n.addEventListener("click",c),setTimeout(c,5e3)}()):(o("message not sent, please try again later"),setTimeout(s,3e3))}catch(e){o("message not sent, please try again later"),setTimeout(s,3e3)}}("https://echo.htmlacademy.ru",new FormData(n),p),n.reset(),l.preventDefault()}))}(u,m,f),t(d,"hidden"),e(k,"not-scroll"),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?t(k,"not-scroll--desktop"):e(k,"not-scroll--desktop"),document.addEventListener("click",E),L.addEventListener("click",p)}function p(){g(),e(d,"hidden"),document.removeEventListener("click",E)}function E(e){let t=e.target;if(t!==v){let e=t===u||u.contains(t),n=d.classList.contains("hidden");e||n||p()}}!function(){const e=document.querySelector(".menu__btn");v.addEventListener("click",h),e.addEventListener("click",(function(){y.classList.toggle("open"),k.classList.toggle("not-scroll"),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||k.classList.toggle("not-scroll--desktop"),document.addEventListener("click",(function n(o){let i=o.target;if(i!==e){let e=i===(y||y.contains(i)),o=y.classList.contains("open");e||o||(g(),t(y,"open"),document.removeEventListener("click",n))}}))}))}()})();